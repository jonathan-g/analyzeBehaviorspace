<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started • analyzeBehaviorspace</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="analyzeBehaviorspace">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">analyzeBehaviorspace</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/analyzebehaviorspace-package.html">Getting Started</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jonathan-g/analyzeBehaviorspace/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/jonathan-g/analyzeBehaviorspace/blob/HEAD/vignettes/analyzebehaviorspace-package.Rmd" class="external-link"><code>vignettes/analyzebehaviorspace-package.Rmd</code></a></small>
      <div class="hidden name"><code>analyzebehaviorspace-package.Rmd</code></div>

    </div>

    
    
<pre><code><span><span class="co">#&gt; Loading required package: shiny</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; This is analyzeBehaviorspace version 1.1.0</span></span></code></pre>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
</div>
<div class="section level2">
<h2 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<div class="section level3">
<h3 id="install-netlogo">Install NetLogo<a class="anchor" aria-label="anchor" href="#install-netlogo"></a>
</h3>
<p>First, download and install NetLogo from <a href="https://ccl.northwestern.edu/netlogo/download.shtml" class="external-link uri">https://ccl.northwestern.edu/netlogo/download.shtml</a>. NetLogo is available for Windows, MacOS, and Linux. Follow the installation instructions for your operating system on the Download page.</p>
</div>
<div class="section level3">
<h3 id="running-a-behaviorspace-experiment">Running a BehaviorSpace Experiment<a class="anchor" aria-label="anchor" href="#running-a-behaviorspace-experiment"></a>
</h3>
<p>The <code>analyzeBehaviorspace</code> package analyzes output from a NetLogo BehaviorSpace experiment, so to use this package we first need to create a BehaviorSpace experiment in NetLogo and run it.</p>
<p>Start NetLogo, open the <code>File</code> menu, and select <code>Models Library</code>. This should open a window for selecting a model. You should see a list of model topics under the heading <code>Sample Models</code>. If you don’t, click on <code>Sample Models</code> to expand the topic list. Click on <code>Social Science</code> and then click on <code>Segregation</code> to open the housing segregation model.</p>
<div class="figure">
<img src="images/model_library.png" alt=""><p class="caption">Model library dialog</p>
</div>
<p>The segregation model is a famous model created by Thomas Schelling in the late 1960s to study housing segregation. You can read more about it in Schelling’s book, <em>Micromotives and Macrobehavior</em>, but here we’re just going to use it to examine the way that varying two parameters affects the stability of the model.</p>
<p>In this model, there are 2601 squares and the model is set up with roughly equal numbers of orange and blue turtles occupying a certain percentage of those squares (this percentage is represented by the variable <code>density</code>).</p>
<p>Turtles are labeled <strong>happy</strong> or <strong>unhappy</strong> depending on the fraction of the turtles on neighboring patches that are the same color as they are. Each turtle looks at the turtles on neighboring patches and calculates the percentage of these that are the same color as itself. If this percentage is greater or equal to the variable <code>%-similar-wanted</code> the turtle is happy and if the percentage is less, then it is unhappy.</p>
<p>At each tick, all happy turtles stay where they are and each of the unhappy ones moves to a random vacant patch. The model keeps track of the number of happy and unhappy turtles, as well as the average percentage of same-color neighbors across all of the turtles. The model and keeps running until there are no unhappy turtles.</p>
<p>For the BehaviorSpace experiment, we will vary the two variables <code>density</code> and <code>%-similar-wanted</code> and monitor the average fraction of similar neighbors and the percentage of turtles that are unhappy.</p>
<p>In order to keep the run time under control, we will limit the model to run for no more than 200 ticks.</p>
<p>Open BehaviorSpace by clicking on the <code>Tools</code> menu and selecting <code>BehaviorSpace</code>. Then click on the <code>New</code> button to create a new BehaviorSpace experiment. Fill in the experiment following the picture below:</p>
<div class="figure">
<img src="images/behaviorspace.png" alt=""><p class="caption">BehaviorSpace experiment for the segregation model</p>
</div>
<p>This experiment will vary <code>density</code> from 80% to 95% in steps of 5% and vary <code>%-similar-wanted</code> from 25% to 95% in steps of 2%. It will run the model 10 times for each configuration.</p>
<p>Measuring at every step of the model runs will create enormous data files and for this example, we only want to know how long it takes the model to finish running, so un-check <code>Measure runs at every step</code> in order to only record the model output values for the end of the run.</p>
<p>This experiment will run the model until it either stops on its own or reaches 200 ticks. At the last tick (when the model stops), it will record the values of two of the model’s reporters: <code>percent-similar</code> and <code>percent-unhappy</code>.</p>
<p>Click on the <code>OK</code> button to save the experiment and then click <code>Run</code> to run it. You will need to configure the run to generate the required output:</p>
<div class="figure">
<img src="images/run_behaviorspace.png" alt=""><p class="caption">Configure output for running a BehaviorSpace experiment</p>
</div>
<p>Check <code>Table output</code>, uncheck <code>Update view</code> and <code>Update plots and monitors</code>. Experiments run much faster if they don’t have to update the model displays. Under <code>Simultaneous runs in parallel</code> NetLogo will make a good guess, based on your computer’s hardware and it’s best to accept this default value.</p>
<p>Now click on the <code>OK</code> button. BehaviorSpace will ask you to give it a filename for saving your experiment’s results (the default will be <code>Segregation experiment-table.csv</code>). Give it a file name and then let the experiment run (this may take some time).</p>
<p>Now you’re ready to run <code>analyzeBehaviorspace</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="running-analyzebehaviorspace">Running analyzeBehaviorspace<a class="anchor" aria-label="anchor" href="#running-analyzebehaviorspace"></a>
</h2>
<p>In an R session, load the analyzeBehaviorspace library and launch an <code>analyzeBehaviorspace</code> shiny application:</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jonathan-g/analyzeBehaviorspace" class="external-link">analyzeBehaviorspace</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/launch_abs.html">launch_abs</a></span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>When the application launches, it will open a web browser window where you can load your data file and analyze the data.</p>
<p>Under <code>Choose csv file</code>, click the <code>Browse...</code> button and choose the file you saved from BehaviorSpace (by default, this is <code>Segregation experiment-table.csv</code>). After the file finishes loading, you should see something like this:</p>
<div class="figure">
<img src="images/abs_initial.png" alt=""><p class="caption">analyzeBehaviorspace screen</p>
</div>
<p>There is a table at the bottom right with the outputs from the experimental run. You are now ready to start graphing the results. Using the selectors for the plot, choose <code>percent-similar-wanted</code> for the <em>x</em>-axis, and <code>tick</code> for the <em>y</em>-axis. Check both <code>points</code> and <code>lines</code>. You will see the number of ticks the model took to make all the turtles happy, or 200 ticks for runs when the model ran out of time. The values indicated by the dots are the average for the 10 model runs at each value of <code>percent-similar-wanted</code> (in the original model, the variable was called <code>%-similar-wanted</code>, but analyzeBehaviorspace translates many common symbols to words).</p>
<div class="figure">
<img src="images/abs_graph_simple.png" alt=""><p class="caption">Graph of experiment output data</p>
</div>
<p>This shows us that for <code>percent-similar-wanted</code> less than about 50%, the model converges quickly to a state where every turtle is happy, and that the time it takes to converge does not change very much as <code>percent-similar-wanted</code> increases. Above 50%, increasing <code>percent-similar-wanted</code> causes large increases in the time to converge until around 77%, where the model does not converge by 200 ticks.</p>
<p>Suppose we want to get a sense of the amount of variation from one model run to another for each value of <code>percent-similar-wanted</code>? We can tick <code>error bars</code> or <code>bands</code> under the <code>Std. Dev.</code> options. This will display either error bars around the points or bands above and below the lines, indicating one standard deviation above and below the average values.</p>
<div class="figure">
<img src="images/abs_graph_simple.png" alt=""><p class="caption">Graph of experiment output with bands representing standard deviation</p>
</div>
<p>We see that there is very little variation from run to run below 50% and above 75%, but that between 50% and 75%, there is a lot of run-to-run variation. A lot of this variation happens because for each value of <code>percent-similar-wanted</code>, we varied <code>density</code> from 80% to 95%. We can display each value of <code>density</code> separately if we use the <code>Group by</code> option to select <code>density</code>. This will display the model output for each value of <code>density</code> in a different color:</p>
<div class="figure">
<img src="images/abs_graph_grouped.png" alt=""><p class="caption">Graph of experiment output, grouped by density</p>
</div>
<p>Now we can see that the value of <code>percent-similar-wanted</code> at which the time to converge begins to rise and the value at which the model reaches 200 ticks without converging both depend strongly on the density of occupied patches. The greater the density, the lower the value of <code>percent-similar-wanted</code> at which it becomes difficult to satisfy all the turtles.</p>
<p>We also see that the range of values for <code>percent-similar-wanted</code> for which there is considerable variation from run to run is much smaller when we consider each value of <code>density</code> separately.</p>
<div class="section level3">
<h3 id="renaming-variables">Renaming variables<a class="anchor" aria-label="anchor" href="#renaming-variables"></a>
</h3>
<p>If you want your plot to look prettier, you can rename variables in your data and the plot will reflect the new names: Scroll down to <code>Rename variables</code>, select <code>percent-similar-wanted</code>, type <code>% similar wanted</code> in the <code>to</code> box, and click on the <code>Rename</code> button. Next, select <code>tick</code>, type <code>Time to converge</code> in <code>to</code> and click <code>Rename</code>. The graph will now look like this:</p>
<div class="figure">
<img src="images/abs_graph_renamed.png" alt=""><p class="caption">Graph with renamed variables</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="saving-output">Saving Output<a class="anchor" aria-label="anchor" href="#saving-output"></a>
</h2>
<p>If you want to save the results of your analysis, either as images of the graphs or as tables of numbers that you can read into Excel, R, or another program for further analysis, you can scroll down to the <code>Save Plot</code> and <code>Save Table</code> buttons on the left. <code>Save Plot</code> will save the current plot as a <code>.png</code> image file. <code>Save Table</code> will save the table of data as a <code>.csv</code> file.</p>
<p>If you check <code>Summary table</code>, then the table you save will correspond to the data plotted in the figure (with averages and standard deviations for the <em>y</em>-axis variable at each value of the <em>x</em>-axis and grouping variables). If <code>Summary table</code> is not checked, then you will save a <code>.csv</code> file with the values of all the variables. In either case, the table displayed in the lower right of the screen shows the data that will be saved.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://www.jonathangilligan.org" class="external-link">Jonathan Gilligan</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
